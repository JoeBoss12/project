name: backend

on:
  push:
    branches: master
  pull_request:
    branches: master

jobs:
    python:
        runs-on: ubuntu-latest
        steps:
        - name: Checkout
          uses: actions/checkout@v3
        - name: Set up Python environment
          uses: actions/setup-python@v4
          with:
            python-version: "3.11"
        - name: Run Black
          uses: psf/black@stable
          with:
            options: --check --verbose --exclude "migrations/"
            src: ./backend
        - name: Run Flake8 lint
          uses: py-actions/flake8@v2
          with:
            path: "backend/"
            # Set the max-line-length equal to black's default
            max-line-length: "88"
            # Exclude autogenerated migrations and settings.py because of line length
            exclude: "migrations/, settings.py"


